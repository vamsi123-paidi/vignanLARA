<!DOCTYPE html>
<html>
  <head>
    <title>Multiple API Fetch with Loading</title>
  </head>
  <body>
    <input type="number" id="userId" placeholder="Enter User ID" />
    <button onclick="fetchUserAndPosts()">Fetch Data</button>

    <p id="loading" style="display: none">Loading...</p>
    <div id="output"></div>

    <script>
      async function fetchUserAndPosts() {
        const userId = document.getElementById("userId").value;
        const output = document.getElementById("output");
        const loading = document.getElementById("loading");

        if (!userId) {
          alert("Enter user ID");
          return;
        }

        loading.style.display = "block";
        output.innerHTML = "";

        try {
          const [userRes, postsRes] = await Promise.all([
            fetch(`https://jsonplaceholder.typicode.com/users/${userId}`),
            fetch(
              `https://jsonplaceholder.typicode.com/posts?userId=${userId}`
            ),
          ]);

          const user = await userRes.json();
          const posts = await postsRes.json();
          console.log(posts);

          output.innerHTML = `
                    <h2>${user.name}</h2>
                    <p>${user.email}</p>

                    <h3>Posts</h3>
                    <ul>
                        ${posts
                          .slice(0, 5)
                          .map((p) => `<li>${p.title}</li>`)
                          .join("")}
                    </ul>
                `;
        } catch (error) {
          output.innerHTML = "<p>Something went wrong</p>";
        } finally {
          loading.style.display = "none";
        }
      }
    </script>
  </body>
</html>
